
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		body {
			margin: 0;
			padding: 0;
		}
		#parent {
			width: 400px;
			height: 400px;
			border: 1px solid #ccc;
			position: absolute;
			left: 200px;
			top: 100px;
		}
		#children {
			width: 100px;
			height: 100px;
			background-color: rgba(255,255,0,0.4);
			position: absolute;
			left: 0;
			top: 0;
		}
	</style>
</head>
<body>
	<div id="parent">
		<div id="children"></div>
	</div>
	<script type="text/javascript">
		/*
			1. 获取要操作的元素 外层盒子 内层盒子
			2. 为外层盒子添加移动事件 onmousemove
			3. 计算内层盒子的x y坐标 pageX - 外层盒子的offsetLeft - 内层盒子的一半
			4. 将计算好的坐标赋值给内层盒子
			5. 限制范围
		*/
	
		var parent = document.getElementById('parent');
		var children = document.getElementById('children');

		parent.onmousemove = function (e) {

			var left = e.pageX - parent.offsetLeft - children.offsetWidth /2;
			var top = e.pageY - parent.offsetTop - children.offsetHeight / 2;

			var maxLeft = parent.offsetWidth - children.offsetWidth;
			var maxTop = parent.offsetHeight - children.offsetHeight;

			left = left < 0 ? 0 : left;
			top = top < 0 ? 0 : top;

			left = left > maxLeft ? maxLeft : left;
			top = top > maxTop ? maxTop : top;

			children.style.left  = left + 'px';
			children.style.top = top + 'px';

		};
	</script>
</body>
</html>